var mochikit=function(){"use strict";function t(t){return new Fn((e,n)=>{let r=t.length-1,i=[];for(let o of t)o.tap(t=>{--r;i.push(t);0===r&&e(i)}),tapCatch(n)})}function e(t,e){return function(...n){return t.call(this,...n).catch(e)}}function n(t,e){return function(...n){return t.call(this,...n).then(e)}}function r(t,e){if("function"!=typeof t)throw new Error("Evaluating strings and bogus functions are not supported.");setTimeout(t,e)}function i(t){t.catch(()=>{})}function o(t,e){t.then(n=>{let r=n;for(let i of e)r=i(r,t,n,e);return r})}function u(t){setTimeout(t,0)}function s(t,e){return setTimeout(e=>t.resolve(e),e),t}function f(t,e){return setTimeout(e=>t.reject(e),e),t}function c(t,e,n,r){t.then(i=>e(i,t)?n(i,t):r(i,t))}function a(t,e){fetch(t,e).then(t=>t.arrayBuffer())}function l(t,e){fetch(t,e).then(t=>t.blob())}function h(t,e){fetch(t,e).then(t=>t.formData())}function d(t,e){fetch(t,e).then(t=>t.json())}function p(t,e){fetch(t,e).then(t=>t.text())}function g(t){return"[object Promise]"===Object.prototype.toString.call(t)}function m(t){return"object"==typeof t&&"function"==typeof t.then}function y(t){return g(t)||m(t)}function b(t){return new Promise((e,n)=>{t.then(t=>{e(t);return t})})}function v(t){return(new Fn).reject(t)}function x(t){return(new Fn).resolve(t)}function H(t,e,{async:async=!0,user:user,password:password},{done:done,error:error,progress:progress,orsc:orsc}){let n=new XMLHttpRequest;return n.open(t,e,async,user,password),done&&n.addEventListener("load",done),error&&n.addEventListener("error",error),progress&&n.addEventListener("progress",progress),orsc&&n.addEventListener("readystatechange",orsc),n.send(),n}function T(t,e){return t.then(n=>{e(n,t);return n})}function E(t,e){return t.finally(n=>{e(n,t);return n})}function w(t){return new Promise(e=>{t.finally(e)})}function A(t,e){switch(e.length){case 0:return t.call(this);case 1:return t.call(this,e[0]);case 2:return t.call(this,e[0],e[1]);case 3:return t.call(this,e[0],e[1],e[2]);case 4:return t.call(this,e[0],e[1],e[2],e[3]);case 5:return t.call(this,e[0],e[1],e[2],e[3],e[4]);case 6:return t.call(this,e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return t.call(this,e[0],arga[1],e[2],e[3],e[4],e[5],e[6]);case 8:return t.call(this,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return t.call(this,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return t.call(this,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:return t.call(this,...e)}}function D(t,e,...n){return function(...r){return t.call(e,...n,...r)}}function S(t,e){let n,r=Object.keys(t);e=void 0===e?t:e;for(let e of r)"function"==typeof(n=t[e])&&(t[e]=n.bind());return t}function C(t,e,...n){return function(...r){return t.call(e,...r,...n)}}function I(t){for(var e=t.split("-"),n=e[0],r=1;r<e.length;r++)n+=e[[r][0]].toUpperCase()+e[r].substring(1);return n}function _(t){return function(e,...n){for(let r of t)e=r.call(this,e,...n);return e}}function O(t){return null==t&&(t=1),function(){return t++}}function L(t){var e=[];for(var n in t)e.push(n);return e}function M(t){return L(t).map(e=>[e,t[e]])}function R(t){return(t+"").replace(Jn,t=>{switch(t){case"\0":return"\\0";case"'":return"\\'";case'"':return'\\"';case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return"\\v";case"\0":return"\\0"}})}function k(t,e){for(let n of e)t[t.length]=n,++t.length;return t}function N(t){let e=[];for(let n of t)Array.isArray(n)?e.push(...n):e.push(n);return e}function j(t){return function(){return this[t].apply(this,arguments)}}function P(t){switch(t){case null:case void 0:return`[object ${null===t?"Null":"Undefined"}]`;case!0:case!1:return"[object Boolean]";case NaN:case 1/0:return"[object Number]"}return""===t?"[object String]":Xn.call(t)}function B(t){return t}function F(t){return t&&isFinite(t.length)}function U(t){return"[object Boolean]"===P(t)}function V(t){return"object"==typeof t&&"function"==typeof t.getTime}function G(t){return F(t)&&0===t.length}function K(t){return!G(t)}function z(...t){return t.every(t=>null===t)}function q(t){return"[object Number]"===P(t)}function W(t){return t&&"[object Object]"===P(t)}function Y(t){return""===t||"[object String]"===P(t)}function J(...t){return t.every(t=>void 0===t)}function Q(t){let e=null==t?null:typeof t;return"boolean"===e||"number"===e||"string"===e}function X(t){return function(e){return e[t]}}function Z(t,e){--i;let n,r,i=0;return function(...o){return n?r:i++<e?t.call(this,...o):(n=!0,void(r=t.call(this,...o)))}}function $(...t){for(var e=0,n=t.length;t.length;){var r=t.shift();if(0!==r.length){n+=r.length-1;for(var i=r.length-1;i>=0;i--)e+=r[i]}else e+=r}if(0===n)throw new TypeError("mean() requires at least one argument");return e/n}function tt(){if(0===data.length)throw new TypeError("median() requires at least one argument");if(data.sort((t,e)=>t+e),data.length%2==0){var t=data.length/2;return(data[t]+data[t-1])/2}return data[(data.length-1)/2]}function et(t,e){for(var n=[t],r=MochiKit.Base.extend;n.length;){var i=e(n.shift());i&&r(n,i)}}function nt(){}function rt(t){let e,n=!1;return function(...r){return n?e:(n=!0,e=t.call(this,...r))}}function it(t,e){var n,r=("?"==t.charAt(0)?t.substring(1):t).replace(/\+/g,"%20").split(/\&amp\;|\&\#38\;|\&#x26;|\&/),i={};if(n="undefined"!=typeof decodeURIComponent?decodeURIComponent:unescape,e)for(s=0;s<r.length;s++){var o=r[s].split("=");if(f=n(o.shift())){var u=i[f];u instanceof Array||(u=[],i[f]=u),u.push(n(o.join("=")))}}else for(var s=0;s<r.length;s++){var f=(o=r[s].split("=")).shift();f&&(i[n(f)]=n(o.join("=")))}return i}function ot(t,...e){return function(...n){return t.call(this,...e,...n)}}function ut(t,...e){return function(...n){return t.call(this,...n,...e)}}function st(t,e){let n,r=(t+"").split(/\s+/g);if(segment.length<=1)throw new Error("Invalid namespace, . char probably asbsent");for(let t of r)e||(n=e[t]={});return n}function ft(t,e){return Object.keys(t).forEach(n=>{n in e||(e[n]=t[n])}),e}function ct(t,e){let n="function"==typeof t,r=[];for(let i=0;i<e;++i)r.push(n?t(i,e,r):t);return r}function at(t,e){null!==t&&void 0!==t||(t={});for(var n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)t[i]=r[i]}return t}function lt(t){var e=[];for(var n in t)e.push(t[n]);return e}function ht(t,e,n,r,i){let o=`The "${t}" is deprecated ${e?`from ${e} onwards`:""}. ${n?`Instead use ${n}`:""}${r?`\n${r}`:""}`;return function(){return console.error(o),i}}function dt(t,...e){return t.filter(t=>{for(let n of e)if(n===t)return!0;return!1})}function pt(t,e){return t*=e,t<0?0:t>e?e:t}function gt(t,e,n){return function(r){return new Cr(t,e,n,r)}}function mt(t,e,n,r){0===r.indexOf(t)&&(r=r.substring(r.indexOf("(",3)+1,r.length-1));for(var i=r.split(/\s*,\s*/),o=[],u=0;u<i.length;u++){var s,f=i[u],c=f.substring(f.length-3);s="%"==f.charAt(f.length-1)?.01*parseFloat(f.substring(0,f.length-1)):"deg"==c?parseFloat(f)/360:"rad"==c?parseFloat(f)/(2*Math.PI):n[u]*parseFloat(f),o.push(s)}return this[e].apply(this,o)}function yt(t){"#"==t[0]&&(t=t.substring(1));var e,n,r=[];if(3==t.length)for(e=0;e<3;e++)n=t.substr(e,1),r.push(parseInt(n+n,16)/255);else for(e=0;e<6;e+=2)n=t.substr(e,2),r.push(parseInt(n,16)/255);let[i,o,u,s]=r;return new Cr(i,o,u,s)}function bt(t,e,n,r){if(1==arguments.length){var i=t;t=i.h,e=i.s,n=i.l,r=i.a}var o,u,s;if(0===e)o=n,u=n,s=n;else{var f,c=2*n-(f=n<=.5?n*(1+e):n+e-n*e),a=MochiKit.Color._hslValue,l=6*t;o=a(c,f,l+2),u=a(c,f,l),s=a(c,f,l-2)}return{r:o,g:u,b:s,a:r}}function vt(t,e,n,r){if(1==arguments.length){var i=t;t=i.r,e=i.g,n=i.b,r=void 0===i.a?void 0:i.a}return new Cr(t,e,n,r)}function xt(...t){return vt(bt(...t))}function Ht(t,e,n,r){if(1==arguments.length){var i=t;t=i.h,e=i.s,n=i.v,r=i.a}var o,u,s;if(0===e)o=n,u=n,s=n;else{var f=Math.floor(6*t),c=6*t-f,a=n*(1-e),l=n*(1-e*c),h=n*(1-e*(1-c));switch(f){case 1:o=l,u=n,s=a;break;case 2:o=a,u=n,s=h;break;case 3:o=a,u=l,s=n;break;case 4:o=h,u=a,s=n;break;case 5:o=n,u=a,s=l;break;case 6:case 0:o=n,u=h,s=a}}return new Cr(o,u,s,r)}function Tt(...t){return vt(Ht(...t))}function Et(t){var e=Kr[t.toLowerCase()];return"string"==typeof e?yt(e):"transparent"==t?Ur():null}function wt(t){var e=t.substr(0,3);return"rgb"==e?qr(t):"hsl"==e?zr(t):"#"==t.charAt(0)?yt(t):Et(t)}function At(t,e,n){n>6?n-=6:n<0&&(n+=6);return n<1?t+(e-t)*n:n<3?e:n<4?t+(e-t)*(4-n):t}function Dt(...t){return t.every(t=>t&&t instanceof Cr)}function St(t,e,n,r){if(1==arguments.length){var i=t;t=i.r,e=i.g,n=i.b,r=i.a}var o,u,s=Math.max(t,Math.max(e,n)),f=Math.min(t,Math.min(e,n)),c=(s+f)/2,a=s-f;return 0===a?(o=0,u=0):(u=c<=.5?a/(s+f):a/(2-s-f),o=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,(o/=6)<0&&(o+=1),o>1&&(o-=1)),{h:o,s:u,l:c,a:r}}function Ct(t,e,n,r){if(1==arguments.length){var i=t;t=i.r,e=i.g,n=i.b,r=i.a}var o,u,s=Math.max(Math.max(t,e),n),f=Math.min(Math.min(t,e),n),c=s;if(f==s)o=0,u=0;else{var a=s-f;u=a/s,o=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,(o/=6)<0&&(o+=1),o>1&&(o-=1)}return{h:o,s:u,v:c,a:r}}function It(t){var e=(t=Math.round(t)).toString(16);return t<16?"0"+e:e}function _t(t,e){for(let n=0,r=t.length;n<r;++n)e.push(t[n]);return e}function Ot(t){return _t(t,{})}function Lt(t,e){let n=new e;for(let e of t)n.add(e);return n}function Mt(t){return Lt(t,Set)}function Rt(t){return Lt(t,WeakSet)}function kt(t){return _t(t,[])}function Nt(t,e){let n=new e;for(let[e,r]of t.entries())n.set(e,r);return n}function jt(t){return Nt(t,Map)}function Pt(t,e){let n=new e;for(let e of t)n.add(e);return n}function Bt(t){return Pt(t,Set)}function Ft(t){return Nt(t,WeakMap)}function Ut(t){return t&&"function"==typeof t.next}function Vt(t,e){let n,r,i=!Ut(e)||e.done;for(;!i;)n=(r=e.next())===e?e.value:r,t.push(n),i=e.done;return t}function Gt(t){return Vt([],t)}function Kt(t=[],e){return class n extends Set{constructor(n){super(n),this.__repr__=null==e?function(){return`NamedTuple(${this.size})`}:e,this.defaults=t;let r=t.length||t.size||0;if(0!==r){let e=Gt(this.values()),n=Gt(t),i=e.length<r;if(i)for(let t=e.length-1;t<r;++t)this.add(n[t])}}}}function zt(t,e){let n=new e,r=Object.keys(t);for(let e of r)n.set(e,t[e]);return n}function qt(t){return zt(t,Map)}function Wt(t){return zt(t,WeakMap)}function Yt(t){return Pt(t,WeakSet)}function Jt(t){if("string"!=typeof(t+="")||0===t.length)return null;var e=t.split("/");return new Date(e[2],e[0]-1,e[1])}function Qt(t){if("string"!=typeof(t+="")||0===t.length)return null;var e=t.split("-");if(0===e.length)return null;var n=new Date(parseInt(e[0],10),parseInt(e[1],10)-1,parseInt(e[2],10));return n.setFullYear(e[0]),n.setMonth(e[1]-1),n.setDate(e[2]),n}function Xt(){}function Zt(t){switch(t.toString().length){case 1:return"000"+t;case 2:return"00"+t;case 3:return"0"+t;default:return t}}function $t(t){return t>9?t:"0"+t}function te(t){return void 0===t||null===t?null:[t.getMonth()+1,t.getDate(),t.getFullYear()].join("/")}function ee(t){return void 0===t||null===t?null:[Zt(t.getFullYear()),$t(t.getMonth()+1),$t(t.getDate())].join("-")}function ne(t,e){return null==t?null:(e&&(t=new Date(t.getTime()+6e4*t.getTimezoneOffset())),[e?$t(t.getHours()):t.getHours(),$t(t.getMinutes()),$t(t.getSeconds())].join(":")+(e?"Z":""))}function re(t,e){if(null==t)return null;var n=ne(t,e),r=e?"T":" ";return e&&(t=new Date(t.getTime()+6e4*t.getTimezoneOffset())),ee(t)+r+n}function ie(t){return null==t?null:[$t(t.getMonth()+1),$t(t.getDate()),t.getFullYear()].join("/")}function oe(t){if(!t)return null;let{ownerDocument:ownerDocument,defaultView:defaultView}=t;return ownerDocument||defaultView||9===t.nodeType&&t||null}function ue(t){let e;switch(t.nodeType){case 1:t.innerHTML="";default:if(t.removeChild&&(e=t.firstChild))for(;e;)t.removeChild(e),e=t.firstChild}return t}function se(t){let e=oe(t);return e&&ue(e)}function fe(t,e){return t.getRootNode().cloneNode(e)}function ce(t){let e=oe(t);return e&&e.body||null}function ae(t){return"object"==typeof t&&q(t.nodeType)&&!W(t)}function le(t){return ae(t)&&9===t.nodeType}function he(t){return 0===t.childNodes.length}function de(t){return ae(t)&&11===t.nodeType}function pe(t){return Zr[t.nodeType]||null}function ge(t,e,n){if($r.test(e))for(let r of e)t.removeEventListener(r,n);else t.removeEventListener(e,n);return t}function me(t,e,n){if(ti.test(e))for(let r of e)t.addEventListener(r,n);else t.addEventListener(e,n);return t}function ye(t,e){let n=e.querySelectorAll(t);for(let t,e=0,r=n.length;e<r;++e)(t=n.parentNode)&&t.removeChild(n[e]);return n}function be(t){return ye("script",t),ye("style",t),ye("link",t),t}function ve(t){return ye("script",t)}function xe(t){let e=oe(t);return e&&e.childNodes||null}function He(t){return function(e,n=document){return n.createElement(t,e)}}function Te(t,e){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,r){return t.call(this,e,n,r)};case 4:return function(e,n,r,i){return t.call(this,e,n,r,i)};case 5:return function(e,n,r,i,o){return t.call(this,e,n,r,i,o)};case 6:return function(e,n,r,i,o,u){return t.call(this,e,n,r,i,o,u)};case 7:return function(e,n,r,i,o,u,s){return t.call(this,e,n,r,i,o,u,s)};case 8:return function(e,n,r,i,o,u,s,f){return t.call(this,e,n,r,i,o,u,s,f)};case 9:return function(e,n,r,i,o,u,s,f,c){return t.call(this,e,n,r,i,o,u,s,f,c)};case 10:return function(e,n,r,i,o,u,s,f,c,a){return t.call(this,e,n,r,i,o,u,s,f,c,a)};default:throw new Error("Out of range")}}function Ee(t){return function(...e){return t.call(this,...e)}}function we(t){return new t}function Ae(t){return function(...e){let n=0,r=e.length;for(;n<r;++n)if(!t.call(this,e,void 0))return!1;return 0!==r}}function De(t){return function(...e){return t.call(this,...e.reverse())}}function Se(t,...e){return function(t,...n){for(let r of e)t=r.call(this,t,...n);return t}}function Ce(t){return Se(t[0],...t.slice(1))}function Ie(t){return function(...e){return!t.call(this,...e)}}function _e(...t){return t.map(we)}function Oe(t,e){return function(n,...r){n?e(n,r):t(...r)}}function Le(t){return function(...e){return t.call(this,e)}}function Me(t){return function(...e){return t.call(this,-1,e)}}function Re(...t){let e,n=0,r=length===n,{length:length}=t;return function(...i){return!r||n>=length?e:(e=t[n].call(this,i,e),++n,e)}}function ke(...t){return Re(...t.reverse())}function Ne(t){return function(e){return t.call(this,e)}}function je(t,e){return function(...n){return e.call(this,t,...n)}}function Pe(t,e){return Gt(t).some(e)}function Be(t,e){for(let n of e)t.call(this,n)}function Fe(t){return new fu(t)}function Ue(){throw cu}function Ve(...t){return new au(...t)}function Ge(t){return new lu(t)}function Ke(t){return new au(...t)}function ze(t,e){return new hu(t,e)}function qe(t){let e=!Ut(t)||t.done;for(;!e;)t.next(),e=t.done}function We(t,e){let n=0,r=!Ut(t)||t.done;for(;r&&n<e;)t.next(),++n,r=t.done;return t}function Ye(t,e){let n,r=0,i=!Ut(t)||t.done;for(;!i;)e((n=t.next())===t?n:t.value,r),i=t.done,++r;return t}function Je(t){return new du(t)}function Qe(t,e){if(Ut(t)){let n=t.next;t.next=function(...t){n.call(this,...t),e.call(this,...t)}}return null}function Xe(t){return t&&"function"==typeof t[Symbol.iterator]}function Ze(t,e){let n=0,r=[],i=Gt(t);for(let t of i)1==e(t,n,i)&&r.push(t),++n;return Fe(r)}function $e(t,e){let n=0,r=[],i=Gt(t);for(let t of i)!1===e(t,n,i)&&r.push(t),++n;return Fe(r)}function tn(t,e){return new pu(t,e)}function en(t){return function(e){return tn(e,t)}}function nn(t,e,n){return Gt(t).slice(e,n)}function rn(t){let e=t&&t.__repr__,n=!!e&&typeof e;return"function"===n?e.call(t):"string"===n?e:null}function on(t,e){if(arguments.length>=2)return self.takewhile(function(t){return t!=e},t);if("function"==typeof t.next)return t;if("function"==typeof t.iter)return t.iter();try{return on.registry.match(t)}catch(e){if(e instanceof Wn)throw new TypeError(`${rn(t)} is not iterable (not found in registry).`);throw e}}function un(t,e){return tn(t,t=>t*e)}function sn(t){return new Gu(t)}function fn(t,e){return new Ku(t,e)}function cn(t,e,n){void 0===n&&(1,n=t[0]);for(let r of t)n=e(n,r);return n}function an(t){return cn(Gt(t))}function ln(t){return new zu(t)}function hn(t){return Gt(t).reverse()}function dn(t,e){return new qu(t,e)}function pn(t,e){return Array.from(t).sort(e)}function gn(t,e){return new fu(pn(t,e))}function mn(t,e){return Gt(t).sort(e)}function yn(t){let e;for(let n of t){if(e!==e)return e;e+=n}return e}function bn(t,e,n){let r=yn(t);return r>n?n:r<e?e:r}function vn(t){return yn(Gt(t))}function xn(t){return bn(Gt(t))}function Hn(t){return new Wu(t)}function Tn(t){return t&&"function"==typeof t.write&&"function"==typeof t.end&&"function"==typeof t.on&&"function"==typeof t.off}function En(...t){return t.every(t=>t instanceof Zu)}function wn(t){console.log(`LEVEL: ${t.level}\nHAS_LOGGER: ${!!t.logger}\nDATA:\n${t.data}`)}function An(t){return function(e){return consoleLogger.log(t,e)}}function Dn(t){$u.stream=t}function Sn(t){return $u}function Cn(t){let e=t&&t.__repr__;return e&&"function"==typeof e}function In(t,e){return t?t.__repr__=e+"":null}function _n(t){if(!Array.isArray(t))throw new Error("Expected an array.");return`array(${t.length}) [${t.join(", ")}]`}function On(t){if(!t||!isFinite(t.length))throw new Error("Expected a function");return`array-like(${array.length}) [${array.join(", ")}]`}function Ln(t){if("function"!=typeof t)throw new Error("Expected a function");return`function "${t.name}"(${t.length}) ${"function"==typeof t.__repr__?t.__repr__():`function ${t.name} {...}`}`}function Mn(t){let e=t&&"number"==typeof t,n=P(t).slice(8,-1);return t?`${n}${e?`(${t.length})`:"(void)"} generic-type(${typeof t})`:"(void)(void) generic-type(void)"}function Rn(t){let e=Object.keys(t);return`keys(${e.length}) { ${e.join(", ")} }`}function kn(t){let e="";for(let n of t.keys())e+=`${n} => ${t.get(n)} `;return`Map(${t.size}) { ${e.replace(/\s$/,"")} }`}function Nn(t){return`Set(${t.size}) [ ${Array.from(t.values())} ]`}function jn(t){let e;return`${typeof t}${"number"==typeof(e=t.length)?`(${e})`:"(void)"}`}function Pn(){return function(){return rn(this.toString())}}let Bn=0;class Fn{constructor(t,e){this.id=++Bn,this.chain=[],this.__error_handlers__=[],this.silentlyCancelled=!1,this.value=void 0,this.canceller=e,this.state=0,"function"==typeof t&&this.fire(t)}fire(t){function e(t){r.reject(t)}function n(t){r.resolve(t)}let r=this;try{t(n,e)}catch(t){e(t)}return this}cancel(){if(this.isSettled())throw new Error("Cannot cancel a settled promise.");return this.canceller?this.canceller(this,this.value):this.silentlyCancelled=!0,this}clearChain(){return this.chain=[],this}isEmpty(){return 0===this.chain.length}isResolved(){return 2===this.state}isRejected(){return 1===this.state}isSettled(){return this.isRejected()||this.isResolved()}reject(t){this.value=t,this.state=1;let e=t;for(let t of this.__error_handlers__)e=t(e);if(!this.anyFor(1))throw t instanceof Error?t.message=`Uncaught Deferred: ${t.message}`:t=new Error(t),t;this.fireCallbacks()}anyFor(t){for(let[,e]of this.chain)if(e===t)return!0;return!1}then(t,e){return"function"==typeof t&&this.addCallback(t,2),"function"==typeof e&&this.addCallback(t,1),this}catch(t){return this.then(null,t)}finally(t){return"function"==typeof t&&this.addCallback(t,3),this}flip(){let t=[];for(let[e,n]of this.chain)1===n?t.push([e,2]):2===n?t.push([e,1]):t.push([e,n]);return this.chain=t,this}addCallback(t,e){if(2!==e&&1!==e&&3!==e)throw new Error("The provided state is not a valid state.");return this.state===e?this.fireCallback(t):this.chain.push([t,e]),this}fireCallbacks(){for(let[t,e]of this.chain)this.correctState(e)&&this.fireCallback(t);return this}correctState(t){return 1===t&&this.isRejected()||2===t&&this.isResolved()||3===t&&this.isSettled()}fireCallback(t){return this.value=t(this.value),this}resolve(t){this.value=t,this.state=2,this.fireCallbacks()}rejectAfter(t,e){return this.actionAfter("reject",t,e)}resolveAfter(t,e){return this.actionAfter("resolve",t,e)}actionAfter(t,e,n){let r=this,i=1===t?"reject":"resolve";setTimeout(function(t){r[i](void 0===n?t:n)},e)}forEach(t){this.then(function(e){let n;if(e&&"number"==typeof(n=e.length)&&isFinite(n))for(let r=0;r<n;++r)t(e[r],r,e);return e})}callbacksFor(t){if(2!==t&&1!==t&&3!==t)throw new Error("The provided state is not a valid state.");let e=[];for(let[n,r]of this.chain)r===t&&e.push(n);return e}clone(){let t=new Fn(null,this.canceller);return t.chain=this.chain,t.state=this.state,t.__error_handlers__=this.__error_handlers__,t.id=this.id,t.silentlyCancelled=this.silentlyCancelled,t}toPromise(){let t=this;return new Promise(function(e,n){t.tap(e).tapCatch(n)})}tapFinally(t){return this.finally(function(e){return t(e),e})}tap(t){return this.then(function(e){return t(e),e})}tapCatch(t){return 1===this.state?t(this.value):this.__error_handlers__.push(t),this}catchSilent(t){return this.catch(function(){})}}class Un{constructor(){this.promises=[]}add(...t){for(let e of t){if(!(e instanceof Fn))throw new TypeError("Expected a Deferred.");this.promises.push(e)}return this}fire(t){for(let e of this.promises)e.fire(t);return this}succeedAfter(t){for(let e of this.promises)s(e,t);return this}failAfter(t){for(let e of this.promises)f(e,t)}allRejected(){return this.promises.every(t=>t.isRejected())}allResolved(){return this.promises.every(t=>t.isResolved())}allSettled(){return this.promises.every(t=>t.isSettled())}succeedAfterWith(t,e){for(let n of this.promises)setTimeout(()=>n.resolve(e),t);return this}failAfterWith(t,e){for(let n of this.promises)setTimeout(()=>n.reject(e),t);return this}[Symbol.iterator](){return this.promises[Symbol.iterator]()}flip(){for(let t of this.promises)t.flip();return this}first(){return this.promises[0]||null}last(){return this.promises[this.size()-1]||null}isEmpty(){return 0!==this.size()}isNotEmpty(){return!this.isEmpty()}__repr__(){return`DeferredList(${this.size()})`}size(){return this.promises.length}}class Vn{constructor(t,e){this.time=Date.now(),this.event=t,this.emitter=e}}class Gn{constructor(){this.messages=[],this.handlers=[],this.collecting=!0,this.onerror=null}on(t,e){return this.handlers.push([t,e]),this}off(t,e){return this.handlers=this.handlers.filter(([n,r])=>r!==e&&n!==t),this}has(t){for(let[e]of this.handlers)if(e===t)return!0;return!1}emitWithGuard(t,e){for(let[n,r]of this.handlers)if(t===n)try{r(this.createMessage(t))}catch(n){e(n),this.onerror&&this.onerror(n,t,r)}return this}emit(t){return this.emitWithGuard(t,t=>{throw t})}createMessage(t){let e=new Vn(t,this);return this.addMessage(e),this}addMessage(t){return this.collecting&&this.messages.push(t),this}hasHandler(t){for(let[,e]of this.handlers)if(e===t)return!0;return!1}whenEmitted(t){let e=this;return new Promise((n,r)=>{e.on(t,n)})}whenFailed(t){let e=this;return new Promise((n,r)=>{let i=!1;e.emitWithGuard(t,t=>{i=!0,r(t)})})}emitDisposing(t,e){return e?this.emitWithGuard(t,e):this.emit(t),this.dispose(t),this}dispose(t){let e=this.handlers;return this.handlers.forEach(([n],r)=>{n===t&&e.splice(r,1)}),this}removeMessages(t){return this.messages=this.messages.filter(({event:event})=>event!==t),this}anyMessages(){return 0!==this.messages.length}clearMessages(){return this.messages=[],this}isCollecting(){return this.collecting}clearHandlers(){return this.handlers=[],this}anyHandlers(){return 0!==this.handlers.length}pop(){return this.handlers.pop(),this}concat(...t){return this.handlers.concat(...t),this}conjoin(t){let e;for(let n of Object.keys(t))e=t[n],this.on(n,e);return this}conjoinMap(t){let e;for(let n of t.keys())e=t.get(n),this.on(n,e);return this}onArray(t,e){for(let n of e)this.on(t,n);return this}keys(){return this.mapIndex(0)}values(){return this.mapIndex(1)}pairs(){return this.handlers}mapIndex(t){return t=+t,this.handlers.map(e=>e[t])}once(t,e){let n=this;return this.on(t,r=>{n.off(t,e);e(r)})}toObject(){let t={};for(let[e,n]of this.handlers)t[e]=n;return t}emitAfter(t,e){let n=this;return setTimeout(()=>{n.emit(t)},e),this}emitTimes(t,e){for(let n=0;n<e;++n)this.emit(t);return this}emitUntil(t,e,n){for(let r=0;r<n&&e(t,r,n);++r)this.emit(t);return this}messagesAt(t){return this.filterMessages(e=>e.time===t)}messagesBefore(t){return this.filterMessages(e=>e.time<t)}messagesAfter(t){return this.filterMessages(e=>e.time>t)}messagesFor(t){return this.filterMessages(e=>e.event===t)}messagesNotFor(t){return this.filterMessages(e=>e.event!==t)}messagesMatching(t){return this.filterMessages(e=>t.event===e.event&&t.time===e.time)}messagesNotMatching(t){return this.filterMessages(e=>t.event!==e.event&&e.time!==t.time)}messagesMap(){let t,e=new Map;for(let n of this.messages)(t=e.get(n.event))?t.add(n):(e.set(n.event,new WeakSet),e.get(n.event).add(n));return e}pipe(t){for(let[e,n]of this.handlers)t.on(e,n);return t.messages=this.messages,t}filterMessages(t){let e=[];for(let n of this.messages)t(n,e,this)&&e.push(n);return e}}var Kn=Object.freeze({__repr__:"[MochiKit.Async]",all:t,asyncCatch:e,asyncThen:n,callLater:r,catchSilent:i,chain:o,defer:u,Deferred:Fn,DeferredList:Un,double:c,failAfter:f,getArrayBuffer:a,getBlob:l,getForm:h,getJSON:d,getText:p,isAsync:y,isPromise:g,isThenable:m,Message:Vn,MessageEmitter:Gn,prevent:b,reject:v,resolve:x,simpleXHR:H,succeedAfter:s,tap:T,tapFinally:E,whenSettled:w,PENDING:0,REJECTED:1,RESOLVED:2,SETTLED:3});class zn{constructor(){this.failed=new Set,this.loaded=new Set}load(t,e,n){let r=this;return new Fn((i,o)=>{let u=e.createElement("img",n);u.onload=i;u.onerror=o;u.url=t;u.addEventListener("load",()=>r.loaded.add(t));u.addEventListener("error",()=>r.failed.add(t))})}createLoader(t,e,n){let r=this;return function(){return r.load(t,e,n)}}loadAfterDOM(t,e,n){let r=this;return e.addEventListener("DOMContentLoaded",()=>r.load(t,e,n)),this}}var qn=Object.freeze({__repr__:"[MochiKit.AsyncNet]",ImageLoader:zn});class Wn extends Error{constructor(t){super(t),this.name="NotFoundError"}}class Yn{constructor(){this.pairs=[]}register(t,e,n,r){r?this.pairs.unshift([t,e,n]):this.pairs.push([t,e,n])}match(){for(var t=0;t<this.pairs.length;t++){var e=this.pairs[t];if(e[1].apply(this,arguments))return e[2].apply(this,arguments)}throw new Wn}unregister(t){for(var e=0;e<this.pairs.length;e++)if(this.pairs[e][0]==t)return this.pairs.splice(e,1),!0;return!1}}let Jn=/(\'|\"|\\|\n|\r|\t|\\b|\f|\v|\0)/g;var Qn=JSON.parse;const Xn=Object.prototype.toString,Zn=t=>!!t,$n=t=>!t,tr=t=>t,er=t=>~t,nr=t=>-t,rr=(t,e)=>t+e,ir=(t,e)=>t-e,or=(t,e)=>t/e,ur=(t,e)=>t%e,sr=(t,e)=>t*e,fr=(t,e)=>t&&e,cr=(t,e)=>t||e,ar=(t,e)=>t^e,lr=(t,e)=>t<<e,hr=(t,e)=>t>>e,dr=(t,e)=>t>>>e,pr=(t,e)=>t==e,gr=(t,e)=>t!=e,mr=(t,e)=>t>e,yr=(t,e)=>t>=e,br=(t,e)=>t<e,vr=(t,e)=>t<=e,xr=(t,e)=>t===e,Hr=(t,e)=>t!==e,Tr=(t,e)=>t&e,Er=(t,e)=>t|e,wr=t=>-1===t,Ar=t=>-1!==t;var Dr=(new Map).set("boolean",!0).set("number",!0).set("function",!0).set("symbol",!0);var Sr=Object.freeze({__repr__:"[MochiKit.Base]",AdapterRegistry:Yn,apply:A,bind:D,bindAll:S,bindRight:C,camelize:I,compose:_,counter:O,entries:M,escapeSpecial:R,evalJSON:Qn,extend:k,flattenArray:N,forwardCall:j,getType:P,identity:B,isArrayLike:F,isBoolean:U,isDateLike:V,isEmpty:G,isNotEmpty:K,isNull:z,isNumber:q,isObject:W,isString:Y,isUndefined:J,isValue:Q,itemgetter:X,keys:L,limit:Z,mean:$,median:tt,nodeWalk:et,noop:nt,NotFoundError:Wn,once:rt,parseQueryString:it,partial:ot,partialRight:ut,primitives:Dr,provide:st,setdefault:ft,times:ct,update:at,values:lt,warnDeprecated:ht,without:dt,truth:Zn,lognot:$n,not:er,neg:nr,add:rr,sub:ir,div:or,mod:ur,mul:sr,and:fr,or:cr,xor:ar,lshift:lr,rshift:hr,zrshift:dr,eq:pr,ne:gr,gt:mr,ge:yr,lt:br,le:vr,seq:xr,sne:Hr,logand:Tr,logor:Er,ioempty:wr,iofound:Ar});class Cr{constructor(t,e,n,r){null==r&&(r=1),this.rgb={r:t,g:e,b:n,a:r}}}const Ir=gt(0,0,0),_r=gt(0,0,1),Or=gt(.6,.4,.2),Lr=gt(0,1,1),Mr=gt(1/3,1/3,1/3),Rr=gt(.5,.5,.5),kr=gt(0,1,0),Nr=gt(1/3*2,1/3*2,1/3*2),jr=gt(1,0,1),Pr=gt(1,.5,0),Br=gt(.5,0,.5),Fr=gt(1,0,0),Ur=function(t,e,n,r){let i=gt(t,e,n);return function(){return i(r)}}(0,0,0,0),Vr=gt(1,1,1),Gr=gt(1,1,0);var Kr=Object.freeze({blackColor:Ir,blueColor:_r,brownColor:Or,cyanColor:Lr,darkGrayColor:Mr,grayColor:Rr,greenColor:kr,lightGrayColor:Nr,magentaColor:jr,orangeColor:Pr,purpleColor:Br,redColor:Fr,transparentColor:Ur,whiteColor:Vr,yellowColor:Gr}),zr=ot(mt,"hsl");var qr=ot(mt,"rgb");class Wr{constructor(t,e,n,r=1){this.h=+t,this.s=+e,this.l=+n,this.opacity=r}}class Yr{constructor(t,e,n,r=1){this.h=+t,this.s=+e,this.v=+n,this.opacity=r}}var Jr=Object.freeze({__repr__:"[MochiKit.Color]",clampColorComponent:pt,Color:Cr,fromColorString:mt,fromHexString:yt,fromHSL:xt,fromHSLString:zr,fromHSV:Tt,fromName:Et,fromRGB:vt,fromRGBString:qr,fromString:wt,HSLColor:Wr,hslToRGB:bt,hslValue:At,HSVColor:Yr,hsvToRGB:Ht,isColor:Dt,rgbToHSL:St,rgbToHSV:Ct,toColorPart:It,blackColor:Ir,blueColor:_r,brownColor:Or,cyanColor:Lr,darkGrayColor:Mr,grayColor:Rr,greenColor:kr,lightGrayColor:Nr,magentaColor:jr,orangeColor:Pr,purpleColor:Br,redColor:Fr,transparentColor:Ur,whiteColor:Vr,yellowColor:Gr,aliceblue:"#f0f8ff",antiquewhiteHex:"#faebd7",aquaHex:"#00ffff",aquamarineHex:"#7fffd4",azureHex:"#f0ffff",beigeHex:"#f5f5dc",bisqueHex:"#ffe4c4",blackHex:"#000000",blanchedalmondHex:"#ffebcd",blueHex:"#0000ff",bluevioletHex:"#8a2be2",brownHex:"#a52a2a",burlywoodHex:"#deb887",cadetblueHex:"#5f9ea0",chartreuseHex:"#7fff00",chocolateHex:"#d2691e",coralHex:"#ff7f50",cornflowerblueHex:"#6495ed",cornsilkHex:"#fff8dc",crimsonHex:"#dc143c",cyanHex:"#00ffff",darkblueHex:"#00008b",darkcyanHex:"#008b8b",darkgoldenrodHex:"#b8860b",darkgrayHex:"#a9a9a9",darkgreenHex:"#006400",darkgreyHex:"#a9a9a9",darkkhakiHex:"#bdb76b",darkmagentaHex:"#8b008b",darkolivegreenHex:"#556b2f",darkorangeHex:"#ff8c00",darkorchidHex:"#9932cc",darkredHex:"#8b0000",darksalmonHex:"#e9967a",darkseagreenHex:"#8fbc8f",darkslateblueHex:"#483d8b",darkslategrayHex:"#2f4f4f",darkslategreyHex:"#2f4f4f",darkturquoiseHex:"#00ced1",darkvioletHex:"#9400d3",deeppinkHex:"#ff1493",deepskyblueHex:"#00bfff",dimgrayHex:"#696969",dimgreyHex:"#696969",dodgerblueHex:"#1e90ff",firebrickHex:"#b22222",floralwhiteHex:"#fffaf0",forestgreenHex:"#228b22",fuchsiaHex:"#ff00ff",gainsboroHex:"#dcdcdc",ghostwhiteHex:"#f8f8ff",goldHex:"#ffd700",goldenrodHex:"#daa520",grayHex:"#808080",greenHex:"#008000",greenyellowHex:"#adff2f",greyHex:"#808080",honeydewHex:"#f0fff0",hotpinkHex:"#ff69b4",indianredHex:"#cd5c5c",indigoHex:"#4b0082",ivoryHex:"#fffff0",khakiHex:"#f0e68c",lavenderHex:"#e6e6fa",lavenderblushHex:"#fff0f5",lawngreenHex:"#7cfc00",lemonchiffonHex:"#fffacd",lightblueHex:"#add8e6",lightcoralHex:"#f08080",lightcyanHex:"#e0ffff",lightgoldenrodyellowHex:"#fafad2",lightgrayHex:"#d3d3d3",lightgreenHex:"#90ee90",lightgreyHex:"#d3d3d3",lightpinkHex:"#ffb6c1",lightsalmonHex:"#ffa07a",lightseagreenHex:"#20b2aa",lightskyblueHex:"#87cefa",lightslategrayHex:"#778899",lightslategreyHex:"#778899",lightsteelblueHex:"#b0c4de",lightyellowHex:"#ffffe0",limeHex:"#00ff00",limegreenHex:"#32cd32",linenHex:"#faf0e6",magentaHex:"#ff00ff",maroonHex:"#800000",mediumaquamarineHex:"#66cdaa",mediumblueHex:"#0000cd",mediumorchidHex:"#ba55d3",mediumpurpleHex:"#9370db",mediumseagreenHex:"#3cb371",mediumslateblueHex:"#7b68ee",mediumspringgreenHex:"#00fa9a",mediumturquoiseHex:"#48d1cc",mediumvioletredHex:"#c71585",midnightblueHex:"#191970",mintcreamHex:"#f5fffa",mistyroseHex:"#ffe4e1",moccasinHex:"#ffe4b5",navajowhiteHex:"#ffdead",navyHex:"#000080",oldlaceHex:"#fdf5e6",oliveHex:"#808000",olivedrabHex:"#6b8e23",orangeHex:"#ffa500",orangeredHex:"#ff4500",orchidHex:"#da70d6",palegoldenrodHex:"#eee8aa",palegreenHex:"#98fb98",paleturquoiseHex:"#afeeee",palevioletredHex:"#db7093",papayawhipHex:"#ffefd5",peachpuffHex:"#ffdab9",peruHex:"#cd853f",pinkHex:"#ffc0cb",plumHex:"#dda0dd",powderblueHex:"#b0e0e6",purpleHex:"#800080",redHex:"#ff0000",rosybrownHex:"#bc8f8f",royalblueHex:"#4169e1",saddlebrownHex:"#8b4513",salmonHex:"#fa8072",sandybrownHex:"#f4a460",seagreenHex:"#2e8b57",seashellHex:"#fff5ee",siennaHex:"#a0522d",silverHex:"#c0c0c0",skyblueHex:"#87ceeb",slateblueHex:"#6a5acd",slategrayHex:"#708090",slategreyHex:"#708090",snowHex:"#fffafa",springgreenHex:"#00ff7f",steelblueHex:"#4682b4",tanHex:"#d2b48c",tealHex:"#008080",thistleHex:"#d8bfd8",tomatoHex:"#ff6347",turquoiseHex:"#40e0d0",violetHex:"#ee82ee",wheatHex:"#f5deb3",whiteHex:"#ffffff",whitesmokeHex:"#f5f5f5",yellowHex:"#ffff00",yellowgreenHex:"#9acd32"});var Qr=Object.freeze({__repr__:"[MochiKit.Data]",arrayLikeToObject:Ot,arrayToList:Lt,arrayToSet:Mt,arrayToWeakSet:Rt,cloneArray:kt,cloneMap:jt,cloneSet:Bt,mapToWeakMap:Ft,NamedTuple:Kt,objectToKeyed:zt,objectToMap:qt,objectToWeakMap:Wt,setToWeakSet:Yt,transformKeyed:Nt,transformList:Pt});var Xr=Object.freeze({__repr__:"[MochiKit.DateTime]",americanDate:Jt,isoDate:Qt,isoRegExp:/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/,isoTimestamp:Xt,padFour:Zt,padTwo:$t,toAmericanDate:te,toISODate:ee,toISOTime:ne,toISOTimestamp:re,toPaddedAmericanDate:ie}),Zr={1:"element",3:"text",4:"cdata_section",7:"processing_instruction",8:"comment",9:"document",10:"document_type",11:"document_fragment"};let $r=/\s+/,ti=/\s+/;const ei=O(0);class ni{constructor(t){this.element=t,this.hiddenDisplay="hidden",this.visibleDisplay="block",this.hiddenVisibility="hidden",this.visibleVisibility="visible",this.modifiable=!0,this.token=ei()}show(){return this.setDisplay(this.visibleDisplay)}hide(){return this.setDisplay(this.hiddenDisplay)}isHiddenInAnyWay(){return this.isHidden()||this.isInvisible()}invisible(){return this.setVisibility(this.hiddenVisibility)}visible(){return this.setVisibility(this.visibleVisibility)}isInvisible(){return this.getVisibility()===this.hiddenVisibility}isVisible(){return this.getVisibility()===this.visibleVisibility}setVisibility(t){return this.isLocked()||(this.element.style.visibility=t),this}getVisibility(){return this.element.style.visibility}isHidden(){return this.getDisplay()===this.hiddenDisplay}isVisible(){return this.getDisplay()===this.visibleDisplay}toggle(){return this.isHidden()?this.show():this.hide(),this}hideAfter(t){return this.taskAfter("hide",t)}showAfter(t){return this.taskAfter("show",t)}toggleAfter(t){return this.taskAfter("toggle",t)}taskAfter(t,e){let n=this;return this.timeoutID=setTimeout(()=>(n.timeoutID=null,n[t]()),e),this}getDisplay(){return this.element.style.display}setDisplay(t){return this.isLocked()||(this.element.style.display=t),this}cancelTimeout(){return clearTimeout(this.timeoutID),this}timeoutActive(){return null!=this.timeoutID}lock(){return this.modifiable=!1,this}unlock(){return this.modifiable=!0,this}isLocked(){return!this.modifiable}isModifiable(){return!this.isLocked()}clone(){let t=new ni;return t.modifiable=this.modifiable,t.timeoutID=this.timeoutID,t.visibleDisplay=this.visibleDisplay,t.element=this.element,t.hiddenDisplay=this.hiddenDisplay,t}fromParent(){return new ni(this.element.parentNode)}fromChildAt(t){return new ni(this.element.childNodes[+t])}fromFirstMatch(t){return new ni(this.element.querySelector(t))}clearContent(){return this.element.innerHTML="",this}cloneWithEl(t){let e=this.clone();return e.element=t,e}setShowStates(t,e){return this.visibleDisplay=t,this.visibleVisibility=e,this}getShowStates(){return[this.visibleDisplay,this.visibleVisibility]}setHiddenStates(t,e){return this.hiddenVisibility=e,this.hiddenDisplay=t,this}getHiddenStates(){return[this.visibleVisibility,this.hiddenVisibility]}}const ri=He("A"),ii=He("ABBR"),oi=He("ADDRESS"),ui=He("AREA"),si=He("ARTICLE"),fi=He("ASIDE"),ci=He("AUDIO"),ai=He("B"),li=He("BASE"),hi=He("BDI"),di=He("BDO"),pi=He("BLOCKQUOTE"),gi=He("BODY"),mi=He("BR"),yi=He("BUTTON"),bi=He("CANVAS"),vi=He("CAPTION"),xi=He("CITE"),Hi=He("CODE"),Ti=He("COL"),Ei=He("COLGROUP"),wi=He("DATA"),Ai=He("DATALIST"),Di=He("DD"),Si=He("DEL"),Ci=He("DETAILS"),Ii=He("DFN"),_i=He("DIALOG"),Oi=He("DIV"),Li=He("DL"),Mi=He("DT"),Ri=He("EM"),ki=He("EMBED"),Ni=He("FIELDSET"),ji=He("FIGCAPTION"),Pi=He("FIGURE"),Bi=He("FOOTER"),Fi=He("FORM"),Ui=He("H1"),Vi=He("H2"),Gi=He("H3"),Ki=He("H4"),zi=He("H5"),qi=He("H6"),Wi=He("HEAD"),Yi=He("HEADER"),Ji=He("HR"),Qi=He("HTML"),Xi=He("I"),Zi=He("IFRAME"),$i=He("IMG"),to=He("INPUT"),eo=He("INS"),no=He("KBD"),ro=He("LABEL"),io=He("LEGEND"),oo=He("LI"),uo=He("LINK"),so=He("MAIN"),fo=He("MAP"),co=He("MARK"),ao=He("META"),lo=He("METER"),ho=He("NAV"),po=He("NOSCRIPT"),go=He("OBJECT"),mo=He("OL"),yo=He("OPTGROUP"),bo=He("OPTION"),vo=He("OUTPUT"),xo=He("P"),Ho=He("PARAM"),To=He("PICTURE"),Eo=He("PRE"),wo=He("PROGRESS"),Ao=He("Q"),Do=He("RP"),So=He("RT"),Co=He("RUBY"),Io=He("S"),_o=He("SAMP"),Oo=He("SCRIPT"),Lo=He("SECTION"),Mo=He("SELECT"),Ro=He("SMALL"),ko=He("SOURCE"),No=He("SPAN"),jo=He("STRONG"),Po=He("STYLE"),Bo=He("SUB"),Fo=He("SUMMARY"),Uo=He("SUP"),Vo=He("SVG"),Go=He("TABLE"),Ko=He("TBODY"),zo=He("TD"),qo=He("TEMPLATE"),Wo=He("TEXTAREA"),Yo=He("TFOOT"),Jo=He("TH"),Qo=He("THEAD"),Xo=He("TIME"),Zo=He("TITLE"),$o=He("TR"),tu=He("TRACK"),eu=He("U"),nu=He("UL"),ru=He("VAR"),iu=He("VIDEO"),ou=He("WBR");var uu=Object.freeze({__repr__:"[MochiKit.DOM]",clearRoot:se,cloneTree:fe,empty:ue,getBody:ce,isDocument:le,isEmpty:he,isFragment:de,isNode:ae,nodeType:pe,nodeTypeMap:Zr,off:ge,on:me,ownerDocument:oe,purify:be,removeMatching:ye,removeScripts:ve,rootChildren:xe,Visibility:ni,A:ri,ABBR:ii,ADDRESS:oi,AREA:ui,ARTICLE:si,ASIDE:fi,AUDIO:ci,B:ai,BASE:li,BDI:hi,BDO:di,BLOCKQUOTE:pi,BODY:gi,BR:mi,BUTTON:yi,CANVAS:bi,CAPTION:vi,CITE:xi,CODE:Hi,COL:Ti,COLGROUP:Ei,DATA:wi,DATALIST:Ai,DD:Di,DEL:Si,DETAILS:Ci,DFN:Ii,DIALOG:_i,DIV:Oi,DL:Li,DT:Mi,EM:Ri,EMBED:ki,FIELDSET:Ni,FIGCAPTION:ji,FIGURE:Pi,FOOTER:Bi,FORM:Fi,H1:Ui,H2:Vi,H3:Gi,H4:Ki,H5:zi,H6:qi,HEAD:Wi,HEADER:Yi,HR:Ji,HTML:Qi,I:Xi,IFRAME:Zi,IMG:$i,INPUT:to,INS:eo,KBD:no,LABEL:ro,LEGEND:io,LI:oo,LINK:uo,MAIN:so,MAP:fo,MARK:co,META:ao,METER:lo,NAV:ho,NOSCRIPT:po,OBJECT:go,OL:mo,OPTGROUP:yo,OPTION:bo,OUTPUT:vo,P:xo,PARAM:Ho,PICTURE:To,PRE:Eo,PROGRESS:wo,Q:Ao,RP:Do,RT:So,RUBY:Co,S:Io,SAMP:_o,SCRIPT:Oo,SECTION:Lo,SELECT:Mo,SMALL:Ro,SOURCE:ko,SPAN:No,STRONG:jo,STYLE:Po,SUB:Bo,SUMMARY:Fo,SUP:Uo,SVG:Vo,TABLE:Go,TBODY:Ko,TD:zo,TEMPLATE:qo,TEXTAREA:Wo,TFOOT:Yo,TH:Jo,THEAD:Qo,TIME:Xo,TITLE:Zo,TR:$o,TRACK:tu,U:eu,UL:nu,VAR:ru,VIDEO:iu,WBR:ou});var su=Object.freeze({__repr__:"[MochiKit.Func]",arity:Te,copyFunction:Ee,ctor:we,everyArg:Ae,flip:De,flow:Ce,invert:Ie,mapCtor:_e,nodeCallback:Oe,passArgs:Le,passTimes:Me,pipe:Se,step:Re,stepRight:ke,unary:Ne,wrap:je});class fu{constructor(t){this.array=t,this.done=!1,this.index=0}next(){if(!this.done){let{array:array,index:index}=this;index>=array.length?this.done=!0:(this.value=array[index],++this.index)}return this}__repr__(){return`ArrayIterator(index = ${this.index}, done = ${this.done}, length = ${this.array.length})`}}var cu=new Error("StopIteration");class au{constructor(...t){this.items=t,this.index=0}next(){let{index:index}=this;return index>=this.items.length&&(this.index=0),this.value=this.items[index],this}__repr__(){return`CycleIterator(index = ${this.index}, length = ${this.items.length})`}}class lu{constructor(t=0){this.n=t,this.done=!1}next(){return this.value=this.n,this}__repr__(){return`CountIterator(n = ${this.n}, done = ${this.done})`}}class hu{constructor(t,e){this.array=t,this.predicate=e,this.index=0}next(){if(!this.done){let{array:array,index:index,predicate:predicate}=this,t=array[index];this.done=predicate(t,index,array)}return this}__repr__(){return`EveryIterator(...)`}}class du{constructor(t){this.generator=t,this.done=t.done,this.value=t.value}__repr__(){return`GenIterator(done = ${this.done})`}next(){return this.generator.next(),this.done=this.generator.done,this.value=this.generator.value,this}}class pu{constructor(t,e){this.pipeFunction=e,this.iter=t,this.done=t.done,"function"==typeof t.__repr__&&(this.__repr__=function(){return this.iter.__repr__()})}next(){return this.done||(this.value=this.pipeFunction(this.iter.next(),this.iter,this),this.done=this.iter.done),this}__repr__(){return`PipedIterator(...)`}}const gu=en(rr),mu=en(fr),yu=en(or),bu=en(pr),vu=en(yr),xu=en(mr),Hu=en(tr),Tu=en(wr),Eu=en(Ar),wu=en(vr),Au=en(Tr),Du=en($n),Su=en(Er),Cu=en(lr),Iu=en(br),_u=en(ur),Ou=en(sr),Lu=en(gr),Mu=en(nr),Ru=en(er),ku=en(cr),Nu=en(hr),ju=en(xr),Pu=en(Hr),Bu=en(ir),Fu=en(Zn),Uu=en(ar),Vu=en(dr);on.registry=new Yn;class Gu extends fu{constructor(t){super(Object.keys(t))}__repr__(){return`KeyIterator(size = ${this.array.length}, done = ${this.done}, index = ${this.index})`}}class Ku{constructor(t,e){this.start=t,this.end=e,this.done=!1,this.index=t}next(){return this.done||(this.index>=this.end?this.done=!0:this.value=++this.index),this}__repr__(){return`RangeIterator(start = ${this.start}, end = ${this.end}, done = ${this.done})`}}class zu{constructor(t){this.value=t,this.done=!1}next(){return this}__repr__(){return`RepeatIterator(done = ${this.done})`}}class qu{constructor(t,e){this.index=0,this.array=t,this.done=!1,this.predicate=e}next(){if(!this.done)if(this.index>=this.array.length)this.done=!0;else{let{array:array,index:index,predicate:predicate}=this,t=array[index];this.value=predicate(t,index,array,this)}return this}__repr__(){return`SomeIterator(done = ${this.done}, index = ${this.index})`}}class Wu extends fu{constructor(t){super(Object.keys(t).map(e=>t[e]))}__repr__(){return`ValueIterator(size = ${this.array.length}, done = ${this.done}, index = ${this.index})`}}var Yu=Object.freeze({__repr__:"[MochiKit.Iter]",any:Pe,applyMap:Be,ArrayIterator:fu,arrayLikeIter:Fe,breakOldLoop:Ue,chain:Ve,count:Ge,CountIterator:lu,cycle:Ke,CycleIterator:au,every:ze,EveryIterator:hu,exhaust:qe,exhaustLimited:We,forEach:Ye,GenIterator:du,genToIterator:Je,guardIterator:Qe,hasSymbolIterator:Xe,iextend:Vt,ifilter:Ze,ifilterfalse:$e,isIterable:Xe,isIterator:Ut,islice:nn,iter:on,itimes:un,KeyIterator:Gu,keyIterator:sn,list:Gt,PipedIterator:pu,pipeNext:tn,range:fn,RangeIterator:Ku,reduceArrayLike:cn,reduceIter:an,repeat:ln,RepeatIterator:zu,reversed:hn,some:dn,SomeIterator:qu,sortedArrayLike:pn,sortedArrayLikeIter:gn,sortedIter:mn,StopIteration:cu,sumArrayLike:yn,sumArrayLikeClamped:bn,sumIter:vn,sumIterClamped:xn,ValueIterator:Wu,ival:Hn,iadd:gu,iand:mu,idiv:yu,ieq:bu,ige:vu,igt:xu,iidentity:Hu,iioempty:Tu,iiofound:Eu,ile:wu,ilogand:Au,ilognot:Du,ilogor:Su,ilshift:Cu,ilt:Iu,imod:_u,imul:Ou,ine:Lu,ineg:Mu,inot:Ru,ior:ku,irshift:Nu,iseq:ju,isne:Pu,isub:Bu,itruth:Fu,ixor:Uu,izrshift:Vu});var Ju=Object.freeze({OFF:0,ERROR:10,WARN:20,INFO:30,DEBUG:40,TRACE:50});class Qu{constructor(){this.handlers=[]}addHandler(t){if("function"!=typeof t)throw new Error("Not a function.");return this.handlers.push(t),this}fire(t){this.handlers.forEach(e=>e(t))}isEmpty(){return 0===this.handlers.length}isNotEmpty(){return!this.isEmpty()}clear(){return this.handlers=[],this}}class Xu{constructor(t){if(!Tn(t))throw new Error("Expected a WritableStream");this.stream=t,this.messages=0,this.level=0,this.handlers=new Qu}addHandler(t){return this.handlers.addHandler(t),this}fireHandlers(t){this.handlers.fire()}isHandlersEmpty(){return this.handlers.isEmpty()}isHandlersNotEmpty(){return!this.isHandlersEmpty()}clearHandlers(){return this.handlers.clear(),this}isLevelAvailable(t){return 0!==this.level&&~~t<=this.level}isErrorAvailable(){return this.isLevelAvailable(10)}isWarnAvailable(){return this.isLevelAvailable(20)}isInfoAvailable(){return this.isLevelAvailable(30)}isDebugAvailable(){return this.isLevelAvailable(40)}isTraceAvailable(){return this.isLevelAvailable(50)}isOff(){return 0===this.level}isOn(){return!this.isOff()}log(t,e){return this.isLevelAvailable(t)&&(this.stream.write(e),this.addMessage()),this}addMessage(){++this.messages}error(t){return this.log(10,t)}warn(t){return this.log(20,t)}info(t){return this.log(30,t)}debug(t){return this.log(40,t)}trace(t){return this.log(50,t)}logError(t){return this.log(10,`ERROR: ${t}`)}logWarn(t){return this.log(20,`WARN: ${t}`)}logInfo(t){return this.log(30,`INFO: ${t}`)}logTrace(t){return this.log(50,`TRACE: ${t}`)}logDebug(t){return this.log(40,`DEBUG: ${t}`)}clone(){let t=new Xu(this.stream);return t.level=this.level,t}__repr__(){return`Logger(${this.level}, ${this.messages})`}reset(){return this.level=0,this.messages=0,this}equals(t){return this.matchingLevel(t)&&this.matchingMessages(t)}matchingLevel(t){return t.level===this.level}matchingMessages(t){return t.messages===this.messages}}class Zu{constructor(t,e,n){this.level=t,this.data=e,this.logger=n,this.timestamp=Date.now()}}let $u=new Xu({write(t){console.log(t)},on(){},off(){},end(){}}),ts=An(10),es=An(20),ns=An(30),rs=An(40),is=An(50);let os={async:Kn,asyncnet:qn,base:Sr,color:Jr,data:Qr,datetime:Xr,dom:uu,func:su,iter:Yu,logging:Object.freeze({__repr__:"[MochiKit.Logger]",logMethod:An,logError:ts,logWarn:es,logInfo:ns,logDebug:rs,logTrace:is,Level:Ju,Logger:Xu,setCurrentLogger:Dn,getCurrentLogger:Sn,isLogMessage:En,isStream:Tn,LogMessage:Zu,printMessage:wn}),repr:Object.freeze({__repr__:"[MochiKit.Repr]",getRepr:rn,hasRepr:Cn,registerRepr:In,reprArray:_n,reprArrayLike:On,reprFunction:Ln,reprGeneric:Mn,reprKeys:Rn,reprMap:kn,reprSet:Nn,reprType:jn,stringRepr:Pn})};return os.version={},os.name="[MochiKit full-build]",os}();
